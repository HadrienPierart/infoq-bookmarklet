javascript:!function(){"use strict";function e(){function e(){if(window.jQuery.ui)t();else{var e=document.createElement("script");e.src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js",e.onload=t,document.body.appendChild(e);var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/vader/jquery-ui.css"),document.getElementsByTagName("head")[0].appendChild(n)}}function t(){if("undefined"==typeof h2m){var e=document.createElement("script");e.src="https://rawgit.com/mathiasbynens/he/master/he.js",document.body.appendChild(e);var t=document.createElement("script");t.src="https://rawgit.com/domchristie/to-markdown/master/src/to-markdown.js",t.onload=n,document.body.appendChild(t)}else n()}function n(){var e=$('<div id="markdownRendered"><textarea id="mdToCopy" cols="80" rows="40" style="display: block; margin: auto; padding: 10px;"></textarea><button onclick="saveTextAsFile()">Download to file</button></div>');e.appendTo("body");var t=$("#markdownRendered");t.dialog({height:600,width:1e3,modal:!0});var n=$("#mdToCopy");n.val("Converting...");var a=$(".text_content_container>.text_info").clone();a=a.find(".related_sponsors").remove().end().find(".clear").remove().end().find("#lowerFullwidthVCR").remove().end().html(),a=a.replace(/img(.*?)src="(\/resource\/)/g,'img$1src="http://www.infoq.com$2').replace(/(<pre\b[^>]*>)/g,"$1\n").replace(/(<\/pre>)/g,"\n$1");var i="";-1!==document.URL.indexOf("www.infoq.com/news")?i=o.news:-1!==document.URL.indexOf("www.infoq.com/article")&&(i=o.news);var r=[];$(".random_links ul li").each(function(e,t){r.push($(t).text())}),r=r.slice(r.indexOf("Topics")+1);var d=i.replace(/\$\{title\}/g,document.title).replace(/\$\{topics\}/g,"\n    - "+r.join("\n    - ")+"\n").replace(/\$\{summary\}/g,$("meta[name=description]").attr("content"));d+=toMarkdown(a.split('<div class="random_links">')[0]),n.val(d)}var o={news:"\n* Title: ${title}\n* Translator:\n* Topics: ${topics}\n* Summary (max 400 chars): ${summary}\n\n---------------------------------------\n\n",article:"\n* Title: ${title}\n* Translator:\n* Topics: ${topics}\n* Short Summary (200 chars max): ${summaryShort}\n* Summary (max 400 chars) : ${summary}\n\n---------------------------------------\n\n"};if($=window.jQuery)e();else{var a=document.createElement("script");a.src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js",a.onload=e,document.body.appendChild(a)}window.saveTextAsFile=function(){var e=document.getElementById("mdToCopy").value,t=new Blob([e],{type:"text/plain"}),n=window.location.pathname.split("/"),o=n[n.length-1]+".md",a=document.createElement("a");a.download=o,a.innerHTML="Download File",null!=window.webkitURL?a.href=window.webkitURL.createObjectURL(t):(a.href=window.URL.createObjectURL(t),a.onclick=destroyClickedElement,a.style.display="none",document.body.appendChild(a)),a.click()}}-1!==document.URL.indexOf("www.infoq.com/")||-1!==window.location.href.indexOf("www.infoq.com/")?e():alert("This bookmarklet only works on infoQ pages.")}();